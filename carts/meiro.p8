pico-8 cartridge // http://www.pico-8.com
version 41
__lua__
GET_KEY_FG = false
GOAL_FG = false
CLEAR_FG = false

function get_map_flag(sprx, spry)
  local celx = flr(sprx/8)
  local cely = flr(spry/8)
  local celc = mget(celx, cely)
  return fget(celc, 0)
end
function collition(x, y)
  local lt = get_map_flag(x+1, y+2)
  local rt = get_map_flag(x+6,y+2)
  local lb = get_map_flag(x+1,y+7)
  local rb = get_map_flag(x+6,y+7)
  return lt or rt or lb or rb
end
function is_get_key(sprx, spry)
  local c = mget(flr(sprx/8), flr(spry/8))
  if c == 4 then
    return true
  else
    return false
  end
end
function is_goal(sprx, spry)
  local c = mget(flr(sprx/8), flr(spry/8))
  if c == 5 then
    return true
  else
    return false
  end
end

function _init()
  x=8
  y=8
  mset(6, 1, 4)
end

function _update()
  local prex = x
  local prey = y
  if btn(0) then x-=1 end
  if btn(1) then x+=1 end
  if btn(2) then y-=1 end
  if btn(3) then y+=1 end
  if collition(x, y) then
    x = prex
    y = prey
  end
  if is_get_key(x+4, y+4) then
    GET_KEY_FG = true
  end
  if is_goal(x+4, y+4) then
    GOAL_FG = true
  end
  if (GET_KEY_FG and GOAL_FG) then
    CLEAR_FG = true
  end
  printh(GOAL_FG)
  printh(CLEAR_FG)
end

function _draw()
  cls(0)
  map(0, 0, 0, 0, 8, 8)
  spr(1, x, y, 1, 1, false, false)
  if (GET_KEY_FG) then
    mset(6, 1, 0)
  end
  print(GET_KEY_FG and "get key!" or "",2,68,7)
  print(CLEAR_FG and "clear!" or "",40,68,7)
end
__gfx__
0000000003333330666666669999999900000000000a000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000033c33c33655555569aaaaaa922220000000aa00000000000000000000000000000000000000000000000000000000000000000000000000000000000
0070070033c33c33656666069a999989faaf2000000aaaa000000000000000000000000000000000000000000000000000000000000000000000000000000000
0007700033333333656666069a999989a29a2222000aaaaa00000000000000000000000000000000000000000000000000000000000000000000000000000000
0007700030700703656666069a999989a22aaaff000aa00000000000000000000000000000000000000000000000000000000000000000000000000000000000
0070070030000003656666069a999989a29a299a000a000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000330770336000000698888889faaf292f000a000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000033333306666666699999999222222020aaaaa0000000000000000000000000000000000000000000000000000000000000000000000000000000000
__label__
66666666666666666666666666666666666666666666666666666666666666660000000000000000000000000000000000000000000000000000000000000000
65555556655555566555555665555556655555566555555665555556655555560000000000000000000000000000000000000000000000000000000000000000
65666606656666066566660665666606656666066566660665666606656666060000000000000000000000000000000000000000000000000000000000000000
65666606656666066566660665666606656666066566660665666606656666060000000000000000000000000000000000000000000000000000000000000000
65666606656666066566660665666606656666066566660665666606656666060000000000000000000000000000000000000000000000000000000000000000
65666606656666066566660665666606656666066566660665666606656666060000000000000000000000000000000000000000000000000000000000000000
60000006600000066000000660000006600000066000000660000006600000060000000000000000000000000000000000000000000000000000000000000000
66666666666666666666666666666666666666666666666666666666666666660000000000000000000000000000000000000000000000000000000000000000
66666666000000009999999900000000000000000000000000000000666666660000000000000000000000000000000000000000000000000000000000000000
65555556000000009aaaaaa900000000000000000000000000000000655555560000000000000000000000000000000000000000000000000000000000000000
65666606000000009a99998900000000000000000000000000000000656666060000000000000000000000000000000000000000000000000000000000000000
65666606000000009a99998900000000000000000000000000000000656666060000000000000000000000000000000000000000000000000000000000000000
65666606000000009a99998900000000000000000000000000000000656666060000000000000000000000000000000000000000000000000000000000000000
65666606000000009a99998900000000000000000000000000000000656666060000000000000000000000000000000000000000000000000000000000000000
60000006000000009888888900000000000000000000000000000000600000060000000000000000000000000000000000000000000000000000000000000000
66666666000000009999999900000000000000000000000000000000666666660000000000000000000000000000000000000000000000000000000000000000
66666666000000009999999900000000999999999999999999999999666666660000000000000000000000000000000000000000000000000000000000000000
65555556000000009aaaaaa9000000009aaaaaa99aaaaaa99aaaaaa9655555560000000000000000000000000000000000000000000000000000000000000000
65666606000000009a999989000000009a9999899a9999899a999989656666060000000000000000000000000000000000000000000000000000000000000000
65666606000000009a999989000000009a9999899a9999899a999989656666060000000000000000000000000000000000000000000000000000000000000000
65666606000000009a999989000000009a9999899a9999899a999989656666060000000000000000000000000000000000000000000000000000000000000000
65666606000000009a999989000000009a9999899a9999899a999989656666060000000000000000000000000000000000000000000000000000000000000000
60000006000000009888888900000000988888899888888998888889600000060000000000000000000000000000000000000000000000000000000000000000
66666666000000009999999900000000999999999999999999999999666666660000000000000000000000000000000000000000000000000000000000000000
66666666000000000000000000000000000000000000000000000000666666660000000000000000000000000000000000000000000000000000000000000000
65555556000000000000000000000000000000000000000000000000655555560000000000000000000000000000000000000000000000000000000000000000
65666606000000000000000000000000000000000000000000000000656666060000000000000000000000000000000000000000000000000000000000000000
65666606000000000000000000000000000000000000000000000000656666060000000000000000000000000000000000000000000000000000000000000000
65666606000000000000000000000000000000000000000000000000656666060000000000000000000000000000000000000000000000000000000000000000
65666606000000000000000000000000000000000000000000000000656666060000000000000000000000000000000000000000000000000000000000000000
60000006000000000000000000000000000000000000000000000000600000060000000000000000000000000000000000000000000000000000000000000000
66666666000000000000000000000000000000000000000000000000666666660000000000000000000000000000000000000000000000000000000000000000
66666666999999999999999999999999999999999999999900000000666666660000000000000000000000000000000000000000000000000000000000000000
655555569aaaaaa99aaaaaa99aaaaaa99aaaaaa99aaaaaa900000000655555560000000000000000000000000000000000000000000000000000000000000000
656666069a9999899a9999899a9999899a9999899a99998900000000656666060000000000000000000000000000000000000000000000000000000000000000
656666069a9999899a9999899a9999899a9999899a99998900000000656666060000000000000000000000000000000000000000000000000000000000000000
656666069a9999899a9999899a9999899a9999899a99998900000000656666060000000000000000000000000000000000000000000000000000000000000000
656666069a9999899a9999899a9999899a9999899a99998900000000656666060000000000000000000000000000000000000000000000000000000000000000
60000006988888899888888998888889988888899888888900000000600000060000000000000000000000000000000000000000000000000000000000000000
66666666999999999999999999999999999999999999999900000000666666660000000000000000000000000000000000000000000000000000000000000000
66666666999999990000000000000000000000009999999900000000666666660000000000000000000000000000000000000000000000000000000000000000
655555569aaaaaa90000000000000000000000009aaaaaa900000000655555560000000000000000000000000000000000000000000000000000000000000000
656666069a9999890000000000000000000000009a99998900000000656666060000000000000000000000000000000000000000000000000000000000000000
656666069a9999890000000000000000000000009a99998900000000656666060000000000000000000000000000000000000000000000000000000000000000
656666069a9999890000000000000000000000009a99998900000000656666060000000000000000000000000000000000000000000000000000000000000000
656666069a9999890000000000000000000000009a99998900000000656666060000000000000000000000000000000000000000000000000000000000000000
60000006988888890000000000000000000000009888888900000000600000060000000000000000000000000000000000000000000000000000000000000000
66666666999999990000000000000000000000009999999900000000666666660000000000000000000000000000000000000000000000000000000000000000
66666666333333800000000099999999000000000000000000000000666666660000000000000000000000000000000000000000000000000000000000000000
655555533c33c330000000009aaaaaa9000000000000000000000000655555560000000000000000000000000000000000000000000000000000000000000000
656666033c33c330000000009a999989000000000000000000000000656666060000000000000000000000000000000000000000000000000000000000000000
6566660333333338000000009a999989000000000000000000000000656666060000000000000000000000000000000000000000000000000000000000000000
6566660307807838000000009a999989000000000000000000000000656666060000000000000000000000000000000000000000000000000000000000000000
6566660308800038000000009a999989000000000000000000000000656666060000000000000000000000000000000000000000000000000000000000000000
60000003387783380000000098888889000000000000000000000000600000060000000000000000000000000000000000000000000000000000000000000000
66666666333333800000000099999999000000000000000000000000666666660000000000000000000000000000000000000000000000000000000000000000
66666666666666666666666666666666666666666666666666666666666666660000000000000000000000000000000000000000000000000000000000000000
65555556655555566555555665555556655555566555555665555556655555560000000000000000000000000000000000000000000000000000000000000000
65666606656666066566660665666606656666066566660665666606656666060000000000000000000000000000000000000000000000000000000000000000
65666606656666066566660665666606656666066566660665666606656666060000000000000000000000000000000000000000000000000000000000000000
65666606656666066566660665666606656666066566660665666606656666060000000000000000000000000000000000000000000000000000000000000000
65666606656666066566660665666606656666066566660665666606656666060000000000000000000000000000000000000000000000000000000000000000
60000006600000066000000660000006600000066000000660000006600000060000000000000000000000000000000000000000000000000000000000000000
66666666666666666666666666666666666666666666666666666666666666660000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077077707770000070707770707007000000000770700077707770777007000000000000000000000000000000000000000000000000000000000000000000
00700070000700000070707000707007000000007000700070007070707007000000000000000000000000000000000000000000000000000000000000000000
00700077000700000077007700777007000000007000700077007770770007000000000000000000000000000000000000000000000000000000000000000000
00707070000700000070707000007000000000007000700070007070707000000000000000000000000000000000000000000000000000000000000000000000
00777077700700000070707770777007000000000770777077707070707007000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
70000000077007707770777077707700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
07000000700070007070700070007070000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700000777070007700770077007070000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
07000000007070007070700070007070000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
70000000770007707070777077707070000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0ee0e0e0ee00eee0eee0e0e00000eee0eee0eee00ee0eee000000000000000000000000000000000000000000000000000000000000000000000000000000000
e000e0e0e0e00e00e0e0e0e00000e000e0e0e0e0e0e0e0e000000000000000000000000000000000000000000000000000000000000000000000000000000000
eee0eee0e0e00e00eee00e000000ee00ee00ee00e0e0ee0000000000000000000000000000000000000000000000000000000000000000000000000000000000
00e000e0e0e00e00e0e0e0e00000e000e0e0e0e0e0e0e0e000000000000000000000000000000000000000000000000000000000000000000000000000000000
ee00eee0e0e00e00e0e0e0e00000eee0e0e0e0e0ee00e0e000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
70000000777007707000770077707770000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
07000000700070707000707070007070000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700000770070707000707077007700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
07000000700070707000707070007070000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
70000000700077007770777077707070000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
70000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
07000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
07000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
70000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000

__gff__
0000010100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__map__
0202020202020202000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0200030000000002000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0200030003030302000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0200000000000002000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0203030303030002000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0203000000030002000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0205000300000002000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0202020202020202000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
